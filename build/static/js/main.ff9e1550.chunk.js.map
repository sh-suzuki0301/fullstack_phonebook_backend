{"version":3,"sources":["components/Persons.js","components/Filter.js","components/PersonForm.js","services/persons.module.js","components/Notification.js","App.js","index.js"],"names":["Persons","persons","handleDelete","renderPersons","map","p","key","id","name","number","onClick","className","Filter","value","handleChange","defaultValue","onChange","PersonForm","newName","handleNameChange","newNumber","handleNumberChange","handleClick","type","url","getData","a","axios","get","response","data","createPerson","newPerson","post","deleteId","delete","updateId","put","Notification","notification","message","presonsSrevise","App","useState","setPersons","setNewName","setNewNumber","nameFilter","setNameFilter","setNotification","useEffect","getPersons","deletePerson","window","confirm","updatePerson","updatedPerson","error","clearNotification","setTimeout","event","preventDefault","some","find","createdPerson","console","log","concat","target","filter","toLowerCase","includes","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ff9e1550.chunk.js","sourcesContent":["import React from 'react';\n\nconst Persons = ({ persons, handleDelete }) => {\n    const renderPersons = persons.map((p) => (\n        <div key={p.id}>\n            {p.name} {p.number}\n            <button onClick={() => handleDelete(p)}>delete</button>\n        </div>\n    ));\n    return <div className=\"Persons\">{renderPersons}</div>\n}\n\nexport default Persons;\n","import React from 'react';\n\nconst Filter = ({value, handleChange}) => {\n    return (\n        <div className=\"Filter\">\n            <div>filter shown with</div>\n            <input defaultValue={value} onChange={handleChange}/>\n        </div>\n    );\n} ;\n\nexport default Filter;","import React from 'react';\n\nconst PersonForm = ({\n    newName,\n    handleNameChange,\n    newNumber,\n    handleNumberChange,\n    handleClick\n}) => {\n    return (\n        <div className=\"PersonForm\">\n            <form>\n                <div>\n                    name:{\"\"}\n                    <input type=\"text\" defaultValue={newName} onChange={handleNameChange} />\n                </div>\n                <div>\n                    number:{\"\"}\n                    <input type=\"text\" defaultValue={newNumber} onChange={handleNumberChange} />\n                </div>\n                <div>\n                    <button onClick={handleClick}>add</button>\n                </div>\n            </form>\n        </div>\n    );\n};\n\nexport default PersonForm;","import axios from 'axios';\nconst url = '/api/persons';\n\nconst getData = async () => {\n    const response = await axios.get(url);\n    return response.data;\n};\n\nconst createPerson = async newPerson => {\n    const response = await axios.post(url, newPerson);\n    return response.data;\n};\n\nconst deleteId = async id => {\n    await axios.delete(`${url}/${id}`);\n};\n\nconst updateId = async ({name, number}, id) => {\n    const response = await axios.put(`${url}/${id}`, {name, number, id});\n    return response.data;\n}\n\nexport default {getData, createPerson, deleteId, updateId};","import React from 'react';\nimport './Notification.css';\n\nconst Notification = ({ notification }) => {\n    const {message, type} = notification;\nreturn <div className={`Notification ${type}`}>{message}</div>\n};\n\nexport default Notification;","import React, { useState, useEffect } from 'react';\nimport Persons from '../src/components/Persons.js';\nimport Filter from '../src/components/Filter.js';\nimport PersonForm from '../src/components/PersonForm.js';\nimport presonsSrevise from './services/persons.module';\nimport Notification from './components/Notification';\n\nconst { getData, deleteId, createPerson, updateId } = presonsSrevise;\n\nconst App = () => { \n    const [persons, setPersons] = useState([]);\n    const [newName, setNewName] = useState('');\n    const [newNumber,setNewNumber] = useState('');\n    const [nameFilter, setNameFilter] = useState('');\n    const [notification, setNotification] = useState();\n\n    const handleNameChange = event => setNewName(event.target.value);\n    const handleNumberChange = event => setNewNumber(event.target.value);\n    const handleFilterChange = event => setNameFilter(event.target.value);\n\n    useEffect(() =>  {\n        getPersons();\n    },[]);\n\n    const getPersons = async () => {\n        setPersons(await getData());\n    }\n\n    const deletePerson = async ({ name, id}) => {\n        window.confirm(`Delete ${name}?`);\n        await deleteId(id);\n        getPersons();\n    }\n\n    const updatePerson = async (newPerson, id) => {\n        window.confirm(\n            `${newPerson.name} is already added to phonebook,replace the old number with a new one?`\n        );\n\n        const updatedPerson = await updateId(newPerson, id);\n        if (updatedPerson.error) {\n            setNotification({\n                type: \"error\",\n                message: updatedPerson.error\n            });\n            clearNotification();\n        } else {\n            setNotification({\n                type: \"success\",\n                message: `Updated ${newPerson.name}`\n            });\n            getPersons();\n            clearNotification();\n        }\n        getData();\n    };\n\n    const clearNotification = () => {\n        setTimeout(() => {\n            setNotification(null);\n        }, 5000);\n    };\n\n    const handleClick = async event => {\n        event.preventDefault();\n        const newPerson = {\n            name: newName,\n            number: newNumber,\n        };\n\n        if (persons.some(p => p.name === newName)) {\n            let id = persons.find(p => p.name === newName).id;\n            try {\n                await updatePerson(newPerson, id);\n            } catch (error) {\n                setNotification({\n                    type: \"error\",\n                    message: `Information of ${newPerson.name} has already been removed from server`\n                });\n                getPersons();\n                clearNotification();\n            }\n        } else {\n            try {\n                const createdPerson = await createPerson(newPerson);\n                if (createdPerson.error) {\n                    console.log(createdPerson.error);\n                    setNotification({\n                        type: \"error\",\n                        message: createdPerson.error\n                    });\n                } else {\n                    setPersons(persons.concat(createdPerson));\n                    setNotification({\n                        type: \"success\",\n                        message: `Add ${newPerson.name}`\n                    });\n                    clearNotification();\n                }\n            } catch (error) {\n                console.error(error);\n            }\n        }\n\n    };\n\n    const filter = persons => {\n        return persons.filter(p =>\n            p.name.toLowerCase().includes(nameFilter.toLowerCase())\n            );\n    } \n\n    return (\n        <div>\n            <h2>Phonebook</h2>\n            {notification ? (\n                <Notification notification={notification} />\n            ) : (\n                <div></div>\n            )}\n            <Filter value={nameFilter} handleChange={handleFilterChange}/>\n\n            <h2>add a new</h2>\n            <PersonForm \n                newName={newName}\n                handleNameChange={handleNameChange}\n                newNumber={newNumber}\n                handleNumberChange={handleNumberChange}\n                handleClick={handleClick}\n            />\n        \n            <h2>Numbers</h2>\n            <Persons persons={filter(persons)} handleDelete={deletePerson}/>  \n        </div>\n    )\n\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App'\n\nReactDOM.render(<App />,document.getElementById('root'));\n"],"sourceRoot":""}